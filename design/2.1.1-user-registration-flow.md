# 2.1.1 - Luồng Đăng Ký Tài Khoản

## Thông tin chung
- **Mã tính năng:** 2.1.1
- **Actor:** Mọi người (Guest)
- **Yêu cầu:** Không có
- **Mục đích:** Cho phép người dùng mới tạo tài khoản trong hệ thống

## Flowchart

```mermaid
flowchart TD
    Start([Bắt đầu]) --> A[Người dùng truy cập trang chủ]
    A --> B[Click nút "Đăng ký"]
    B --> C[Hiển thị form đăng ký]
    C --> D[Nhập thông tin:<br/>- Email<br/>- Tên<br/>- Mật khẩu<br/>- Xác nhận mật khẩu]
    D --> E[Click "Đăng ký"]
    E --> F{Validate dữ liệu}
    
    F -->|Email không hợp lệ| G[Hiển thị lỗi:<br/>"Email không đúng định dạng"]
    F -->|Tên trống hoặc > 50 ký tự| H[Hiển thị lỗi:<br/>"Tên không hợp lệ"]
    F -->|Mật khẩu < 8 hoặc > 16 ký tự| I[Hiển thị lỗi:<br/>"Mật khẩu phải từ 8-16 ký tự"]
    F -->|Mật khẩu không khớp| J[Hiển thị lỗi:<br/>"Mật khẩu xác nhận không khớp"]
    
    G --> D
    H --> D
    I --> D
    J --> D
    
    F -->|Hợp lệ| K{Kiểm tra email<br/>trong database}
    K -->|Email đã tồn tại| L[Hiển thị lỗi:<br/>"Email đã được sử dụng"]
    L --> D
    
    K -->|Email chưa tồn tại| M[Tạo tài khoản mới<br/>Trạng thái: "Chờ xác nhận"<br/>Vai trò mặc định: Reader]
    M --> N[Hiển thị thông báo:<br/>"Đăng ký thành công!<br/>Vui lòng chờ xác nhận"]
    N --> O[Chuyển hướng đến<br/>trang Đăng nhập]
    O --> End([Kết thúc])
```

## Validation Rules

| Trường | Quy tắc | Thông báo lỗi |
|--------|---------|---------------|
| Email | Định dạng email hợp lệ (regex) | "Email không đúng định dạng" |
| Email | Chưa tồn tại trong hệ thống | "Email đã được sử dụng" |
| Tên | Không được trống | "Tên không được để trống" |
| Tên | Tối đa 50 ký tự | "Tên không được vượt quá 50 ký tự" |
| Mật khẩu | Không được trống | "Mật khẩu không được để trống" |
| Mật khẩu | Tối thiểu 8 ký tự | "Mật khẩu phải có ít nhất 8 ký tự" |
| Mật khẩu | Tối đa 16 ký tự | "Mật khẩu không được vượt quá 16 ký tự" |
| Xác nhận mật khẩu | Phải trùng với mật khẩu | "Mật khẩu xác nhận không khớp" |

## Trạng thái tài khoản sau đăng ký
- **Status:** "Chờ xác nhận" (Pending)
- **Role:** Reader (mặc định)

## Ghi chú
- Tài khoản cần được Admin phê duyệt trước khi có thể đăng nhập
- Mật khẩu được hash trước khi lưu vào database

