# 2.3.3 - Luแปng Xem Lแปch Sแปญ Mฦฐแปฃn Sรกch (ฤแปc Giแบฃ)

## Thรดng tin chung
- **Mรฃ tรญnh nฤng:** 2.3.3
- **Actor:** ฤแปc giแบฃ (Reader)
- **Yรชu cแบงu:** 
  - ฤฤng nhแบญp vแปi vai trรฒ ฤแปc giแบฃ (2.1.2)
  - Cรณ รญt nhแบฅt mแปt ฤฦกn mฦฐแปฃn (2.3.1)
- **Mแปฅc ฤรญch:** Xem lแปch sแปญ vร trแบกng thรกi cรกc ฤฦกn mฦฐแปฃn sรกch cแปงa ฤแปc giแบฃ

## Flowchart - Tแปng quan

```mermaid
flowchart TD
    Start([Bแบฏt ฤแบงu]) --> A[ฤแปc giแบฃ ฤฤng nhแบญp]
    A --> B[Truy cแบญp menu<br/>"Lแปch sแปญ mฦฐแปฃn sรกch"]
    B --> C[Hiแปn thแป danh sรกch<br/>tแบฅt cแบฃ ฤฦกn mฦฐแปฃn]
    
    C --> D{ฤแปc giแบฃ muแปn<br/>lรm gรฌ?}
    
    D -->|Lแปc theo trแบกng thรกi| E[Luแปng Lแปc]
    D -->|Xem lรฝ do tแปซ chแปi| F[Luแปng Xem lรฝ do]
    D -->|Gia hแบกn sรกch| G[Luแปng Gia hแบกn]
    D -->|Yรชu cแบงu trแบฃ sรกch| H[Chuyแปn ฤแบฟn 2.4.1]
    D -->|Khรดng lรm gรฌ| End([Kแบฟt thรบc])
    
    E --> C
    F --> C
    G --> C
    H --> End
```

## Flowchart - Lแปc theo trแบกng thรกi

```mermaid
flowchart TD
    Start([Lแปc trแบกng thรกi]) --> A[Click dropdown<br/>"Trแบกng thรกi"]
    A --> B[Hiแปn thแป cรกc tรนy chแปn:<br/>- Tแบฅt cแบฃ<br/>- Chแป xรกc nhแบญn<br/>- ฤang mฦฐแปฃn<br/>- Quรก hแบกn<br/>- ฤรฃ trแบฃ<br/>- Bแป tแปซ chแปi]
    B --> C[Chแปn trแบกng thรกi<br/>muแปn lแปc]
    C --> D[Gแปi API vแปi<br/>status = trแบกng thรกi ฤรฃ chแปn]
    D --> E{Cรณ kแบฟt quแบฃ?}
    
    E -->|Cรณ| F[Hiแปn thแป danh sรกch<br/>ฤฦกn mฦฐแปฃn theo trแบกng thรกi]
    E -->|Khรดng| G[Hiแปn thแป:<br/>"Khรดng cรณ ฤฦกn mฦฐแปฃn<br/>nรo แป trแบกng thรกi nรy"]
    
    F --> End([Kแบฟt thรบc])
    G --> End
```

## Flowchart - Xem lรฝ do tแปซ chแปi

```mermaid
flowchart TD
    Start([Xem lรฝ do tแปซ chแปi]) --> A{ฤฦกn cรณ trแบกng thรกi<br/>"Bแป tแปซ chแปi"?}
    
    A -->|Khรดng| B[Khรดng cรณ nรบt<br/>xem lรฝ do]
    B --> End([Kแบฟt thรบc])
    
    A -->|Cรณ| C[Click "Xem lรฝ do"]
    C --> D[Hiแปn thแป modal:<br/>- Tรชn sรกch<br/>- Ngรy tแปซ chแปi<br/>- Lรฝ do tแปซ chแปi]
    D --> E[Click "ฤรณng"]
    E --> End
```

## Flowchart - Gia hแบกn sรกch

```mermaid
flowchart TD
    Start([Gia hแบกn sรกch]) --> A{ฤฦกn cรณ trแบกng thรกi<br/>"ฤang mฦฐแปฃn"?}
    
    A -->|Khรดng| B[Khรดng hiแปn thแป<br/>nรบt Gia hแบกn]
    B --> End([Kแบฟt thรบc])
    
    A -->|Cรณ| C{ฤรฃ quรก<br/>ngรy hแบฟt hแบกn?}
    
    C -->|Cรณ - Quรก hแบกn| D[Khรดng hiแปn thแป<br/>nรบt Gia hแบกn]
    D --> End
    
    C -->|Chฦฐa| E{ฤรฃ gia hแบกn<br/>1 lแบงn trฦฐแปc ฤรณ?}
    
    E -->|Cรณ| F[Hiแปn thแป:<br/>"ฤรฃ ฤแบกt giแปi hแบกn<br/>gia hแบกn"]
    F --> End
    
    E -->|Chฦฐa| G[Hiแปn thแป nรบt<br/>"Gia hแบกn"]
    G --> H[Click "Gia hแบกn"]
    H --> I[Hiแปn thแป modal:<br/>"Gia hแบกn thรชm 7 ngรy?<br/>Bแบกn chแป ฤฦฐแปฃc gia hแบกn 1 lแบงn"]
    I --> J{Ngฦฐแปi dรนng<br/>xรกc nhแบญn?}
    
    J -->|Hแปงy| End
    J -->|Xรกc nhแบญn| K[Cแบญp nhแบญt database:<br/>- dueDate + 7 ngรy<br/>- extendedCount = 1]
    K --> L[Hiแปn thแป thรดng bรกo:<br/>"Gia hแบกn thรnh cรดng!<br/>Hแบกn trแบฃ mแปi: [ngรy]"]
    L --> End
```

## Thรดng tin hiแปn thแป - Sรกch ฤang mฦฐแปฃn

| Trฦฐแปng | Mรด tแบฃ |
|--------|-------|
| Tรชn sรกch | Tiรชu ฤแป sรกch |
| Tรกc giแบฃ | Tรชn tรกc giแบฃ |
| Ngรy mฦฐแปฃn | Ngรy nhรขn viรชn xรกc nhแบญn |
| Hแบกn trแบฃ | Ngรy phแบฃi trแบฃ sรกch |
| Sแป ngรy cรฒn lแบกi | Sแป ngรy ฤแบฟn hแบกn trแบฃ |
| Trแบกng thรกi | ฤang mฦฐแปฃn / Quรก hแบกn |
| Hรnh ฤแปng | Gia hแบกn / Xin trแบฃ sรกch |

## Thรดng tin hiแปn thแป - Sรกch ฤรฃ trแบฃ

| Trฦฐแปng | Mรด tแบฃ |
|--------|-------|
| Tรชn sรกch | Tiรชu ฤแป sรกch |
| Ngรy mฦฐแปฃn | Ngรy bแบฏt ฤแบงu mฦฐแปฃn |
| Ngรy trแบฃ | Ngรy thแปฑc tแบฟ trแบฃ sรกch |
| Trแบกng thรกi | ฤรฃ trแบฃ |

## Thรดng tin hiแปn thแป - Sรกch bแป tแปซ chแปi

| Trฦฐแปng | Mรด tแบฃ |
|--------|-------|
| Tรชn sรกch | Tiรชu ฤแป sรกch |
| Tรกc giแบฃ | Tรชn tรกc giแบฃ |
| Ngรy yรชu cแบงu | Ngรy tแบกo ฤฦกn mฦฐแปฃn |
| Trแบกng thรกi | Bแป tแปซ chแปi |
| Hรnh ฤแปng | Xem lรฝ do |

## Cรกc trแบกng thรกi ฤฦกn mฦฐแปฃn

| Trแบกng thรกi | Mรฃ | Mรด tแบฃ | Mรu hiแปn thแป |
|------------|-----|-------|--------------|
| Chแป xรกc nhแบญn | PENDING | ฤang chแป nhรขn viรชn xแปญ lรฝ | ๐ก Vรng |
| ฤang mฦฐแปฃn | BORROWED | Sรกch ฤang ฤฦฐแปฃc mฦฐแปฃn | ๐ต Xanh dฦฐฦกng |
| Quรก hแบกn | OVERDUE | ฤรฃ quรก hแบกn trแบฃ | ๐ด ฤแป |
| ฤรฃ trแบฃ | RETURNED | Sรกch ฤรฃ ฤฦฐแปฃc trแบฃ | ๐ข Xanh lรก |
| Bแป tแปซ chแปi | REJECTED | Yรชu cแบงu bแป tแปซ chแปi | โซ Xรกm |

## Quy tแบฏc gia hแบกn

| Quy tแบฏc | Giรก trแป |
|---------|---------|
| Sแป lแบงn gia hแบกn tแปi ฤa | 1 lแบงn |
| Thแปi gian gia hแบกn | +7 ngรy |
| ฤiแปu kiแปn | Chฦฐa quรก hแบกn + Chฦฐa gia hแบกn lแบงn nรo |

## Ghi chรบ
- Trแบกng thรกi "Quรก hแบกn" ฤฦฐแปฃc tรญnh tแปฑ ฤแปng dแปฑa trรชn ngรy hแบฟt hแบกn
- Sรกch quรก hแบกn khรดng thแป gia hแบกn ฤฦฐแปฃc
- ฤแปc giแบฃ cรณ thแป xem lรฝ do tแปซ chแปi ฤแป biแบฟt nguyรชn nhรขn
- Nรบt "Xin trแบฃ sรกch" chuyแปn ฤแบฟn luแปng 2.4.1

